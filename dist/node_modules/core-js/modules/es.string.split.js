import fails from'../internals/fails.js';import requireObjectCoercible from'../internals/require-object-coercible.js';import anObject from'../internals/an-object.js';import toLength from'../internals/to-length.js';import regexpExec from'../internals/regexp-exec.js';import fixRegExpWellKnownSymbolLogic from'../internals/fix-regexp-well-known-symbol-logic.js';import advanceStringIndex from'../internals/advance-string-index.js';import regExpExec from'../internals/regexp-exec-abstract.js';import speciesConstructor from'../internals/species-constructor.js';import isRegExp from'../internals/is-regexp.js';var arrayPush=[].push,min=Math.min,MAX_UINT32=4294967295,SUPPORTS_Y=!fails(function(){return !RegExp(MAX_UINT32,"y")});fixRegExpWellKnownSymbolLogic("split",2,function(SPLIT,nativeSplit,maybeCallNative){var internalSplit;return internalSplit="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(separator,limit){var string=String(requireObjectCoercible(this)),lim=void 0===limit?MAX_UINT32:limit>>>0;if(0===lim)return [];if(void 0===separator)return [string];if(!isRegExp(separator))return nativeSplit.call(string,separator,lim);for(var match,lastIndex,lastLength,output=[],flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.unicode?"u":"")+(separator.sticky?"y":""),lastLastIndex=0,separatorCopy=new RegExp(separator.source,flags+"g");(match=regexpExec.call(separatorCopy,string))&&(lastIndex=separatorCopy.lastIndex,!(lastIndex>lastLastIndex&&(output.push(string.slice(lastLastIndex,match.index)),1<match.length&&match.index<string.length&&arrayPush.apply(output,match.slice(1)),lastLength=match[0].length,lastLastIndex=lastIndex,output.length>=lim)));)separatorCopy.lastIndex===match.index&&separatorCopy.lastIndex++;return lastLastIndex===string.length?(lastLength||!separatorCopy.test(""))&&output.push(""):output.push(string.slice(lastLastIndex)),output.length>lim?output.slice(0,lim):output}:"0".split(void 0,0).length?function(separator,limit){return void 0===separator&&0===limit?[]:nativeSplit.call(this,separator,limit)}:nativeSplit,[function split(separator,limit){var O=requireObjectCoercible(this),splitter=null==separator?void 0:separator[SPLIT];return void 0===splitter?internalSplit.call(String(O),separator,limit):splitter.call(separator,O,limit)},function(regexp,limit){var res=maybeCallNative(internalSplit,regexp,this,limit,internalSplit!==nativeSplit);if(res.done)return res.value;var rx=anObject(regexp),S=String(this),C=speciesConstructor(rx,RegExp),unicodeMatching=rx.unicode,flags=(rx.ignoreCase?"i":"")+(rx.multiline?"m":"")+(rx.unicode?"u":"")+(SUPPORTS_Y?"y":"g"),splitter=new C(SUPPORTS_Y?rx:"^(?:"+rx.source+")",flags),lim=void 0===limit?MAX_UINT32:limit>>>0;if(0===lim)return [];if(0===S.length)return null===regExpExec(splitter,S)?[S]:[];for(var p=0,q=0,A=[];q<S.length;){splitter.lastIndex=SUPPORTS_Y?q:0;var e,z=regExpExec(splitter,SUPPORTS_Y?S:S.slice(q));if(null===z||(e=min(toLength(splitter.lastIndex+(SUPPORTS_Y?0:q)),S.length))===p)q=advanceStringIndex(S,q,unicodeMatching);else {if(A.push(S.slice(p,q)),A.length===lim)return A;for(var i=1;i<=z.length-1;i++)if(A.push(z[i]),A.length===lim)return A;q=p=e;}}return A.push(S.slice(p)),A}]},!SUPPORTS_Y);