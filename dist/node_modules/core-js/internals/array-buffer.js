import global from'./global.js';import fails from'./fails.js';import DESCRIPTORS from'./descriptors.js';import _ref2 from'./object-define-property.js';import createNonEnumerableProperty from'./create-non-enumerable-property.js';import _ref4 from'./internal-state.js';import toInteger from'./to-integer.js';import toLength from'./to-length.js';import _ref3 from'./object-get-own-property-names.js';import getPrototypeOf from'./object-get-prototype-of.js';import setToStringTag from'./set-to-string-tag.js';import setPrototypeOf from'./object-set-prototype-of.js';import redefineAll from'./redefine-all.js';import anInstance from'./an-instance.js';import NATIVE_ARRAY_BUFFER from'./array-buffer-native.js';import toIndex from'./to-index.js';import IEEE754 from'./ieee754.js';import arrayFill from'./array-fill.js';const _ref={exports:{}};(function(module,exports){var getOwnPropertyNames=_ref3.f,defineProperty=_ref2.f,getInternalState=_ref4.get,setInternalState=_ref4.set,ARRAY_BUFFER="ArrayBuffer",DATA_VIEW="DataView",PROTOTYPE="prototype",WRONG_LENGTH="Wrong length",WRONG_INDEX="Wrong index",NativeArrayBuffer=global[ARRAY_BUFFER],$ArrayBuffer=NativeArrayBuffer,$DataView=global[DATA_VIEW],$DataViewPrototype=$DataView&&$DataView[PROTOTYPE],ObjectPrototype=Object.prototype,RangeError=global.RangeError,packIEEE754=IEEE754.pack,unpackIEEE754=IEEE754.unpack,packInt8=function packInt8(number){return [255&number]},packInt16=function packInt16(number){return [255&number,255&number>>8]},packInt32=function packInt32(number){return [255&number,255&number>>8,255&number>>16,255&number>>24]},unpackInt32=function unpackInt32(buffer){return buffer[3]<<24|buffer[2]<<16|buffer[1]<<8|buffer[0]},packFloat32=function packFloat32(number){return packIEEE754(number,23,4)},packFloat64=function packFloat64(number){return packIEEE754(number,52,8)},addGetter=function addGetter(Constructor,key){defineProperty(Constructor[PROTOTYPE],key,{get:function(){return getInternalState(this)[key]}});},get=function get(view,count,index,isLittleEndian){var intIndex=toIndex(index),store=getInternalState(view);if(intIndex+count>store.byteLength)throw RangeError(WRONG_INDEX);var bytes=getInternalState(store.buffer).bytes,start=intIndex+store.byteOffset,pack=bytes.slice(start,start+count);return isLittleEndian?pack:pack.reverse()},set=function set(view,count,index,conversion,value,isLittleEndian){var intIndex=toIndex(index),store=getInternalState(view);if(intIndex+count>store.byteLength)throw RangeError(WRONG_INDEX);for(var bytes=getInternalState(store.buffer).bytes,start=intIndex+store.byteOffset,pack=conversion(+value),i=0;i<count;i++)bytes[start+i]=pack[isLittleEndian?i:count-i-1];};if(!NATIVE_ARRAY_BUFFER)$ArrayBuffer=function ArrayBuffer(length){anInstance(this,$ArrayBuffer,ARRAY_BUFFER);var byteLength=toIndex(length);setInternalState(this,{bytes:arrayFill.call(new Array(byteLength),0),byteLength:byteLength}),DESCRIPTORS||(this.byteLength=byteLength);},$DataView=function DataView(buffer,byteOffset,byteLength){anInstance(this,$DataView,DATA_VIEW),anInstance(buffer,$ArrayBuffer,DATA_VIEW);var bufferLength=getInternalState(buffer).byteLength,offset=toInteger(byteOffset);if(0>offset||offset>bufferLength)throw RangeError("Wrong offset");if(byteLength=void 0===byteLength?bufferLength-offset:toLength(byteLength),offset+byteLength>bufferLength)throw RangeError(WRONG_LENGTH);setInternalState(this,{buffer:buffer,byteLength:byteLength,byteOffset:offset}),DESCRIPTORS||(this.buffer=buffer,this.byteLength=byteLength,this.byteOffset=offset);},DESCRIPTORS&&(addGetter($ArrayBuffer,"byteLength"),addGetter($DataView,"buffer"),addGetter($DataView,"byteLength"),addGetter($DataView,"byteOffset")),redefineAll($DataView[PROTOTYPE],{getInt8:function getInt8(byteOffset){return get(this,1,byteOffset)[0]<<24>>24},getUint8:function getUint8(byteOffset){return get(this,1,byteOffset)[0]},getInt16:function getInt16(byteOffset){var bytes=get(this,2,byteOffset,1<arguments.length?arguments[1]:void 0);return (bytes[1]<<8|bytes[0])<<16>>16},getUint16:function getUint16(byteOffset){var bytes=get(this,2,byteOffset,1<arguments.length?arguments[1]:void 0);return bytes[1]<<8|bytes[0]},getInt32:function getInt32(byteOffset){return unpackInt32(get(this,4,byteOffset,1<arguments.length?arguments[1]:void 0))},getUint32:function getUint32(byteOffset){return unpackInt32(get(this,4,byteOffset,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function getFloat32(byteOffset){return unpackIEEE754(get(this,4,byteOffset,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function getFloat64(byteOffset){return unpackIEEE754(get(this,8,byteOffset,1<arguments.length?arguments[1]:void 0),52)},setInt8:function setInt8(byteOffset,value){set(this,1,byteOffset,packInt8,value);},setUint8:function setUint8(byteOffset,value){set(this,1,byteOffset,packInt8,value);},setInt16:function setInt16(byteOffset,value){set(this,2,byteOffset,packInt16,value,2<arguments.length?arguments[2]:void 0);},setUint16:function setUint16(byteOffset,value){set(this,2,byteOffset,packInt16,value,2<arguments.length?arguments[2]:void 0);},setInt32:function setInt32(byteOffset,value){set(this,4,byteOffset,packInt32,value,2<arguments.length?arguments[2]:void 0);},setUint32:function setUint32(byteOffset,value){set(this,4,byteOffset,packInt32,value,2<arguments.length?arguments[2]:void 0);},setFloat32:function setFloat32(byteOffset,value){set(this,4,byteOffset,packFloat32,value,2<arguments.length?arguments[2]:void 0);},setFloat64:function setFloat64(byteOffset,value){set(this,8,byteOffset,packFloat64,value,2<arguments.length?arguments[2]:void 0);}});else {if(!fails(function(){NativeArrayBuffer(1);})||!fails(function(){new NativeArrayBuffer(-1);})||fails(function(){return new NativeArrayBuffer,new NativeArrayBuffer(1.5),new NativeArrayBuffer(NaN),NativeArrayBuffer.name!=ARRAY_BUFFER})){$ArrayBuffer=function ArrayBuffer(length){return anInstance(this,$ArrayBuffer),new NativeArrayBuffer(toIndex(length))};for(var key,ArrayBufferPrototype=$ArrayBuffer[PROTOTYPE]=NativeArrayBuffer[PROTOTYPE],keys=getOwnPropertyNames(NativeArrayBuffer),j=0;keys.length>j;)(key=keys[j++])in $ArrayBuffer||createNonEnumerableProperty($ArrayBuffer,key,NativeArrayBuffer[key]);ArrayBufferPrototype.constructor=$ArrayBuffer;}setPrototypeOf&&getPrototypeOf($DataViewPrototype)!==ObjectPrototype&&setPrototypeOf($DataViewPrototype,ObjectPrototype);var testView=new $DataView(new $ArrayBuffer(2)),nativeSetInt8=$DataViewPrototype.setInt8;testView.setInt8(0,2147483648),testView.setInt8(1,2147483649),(testView.getInt8(0)||!testView.getInt8(1))&&redefineAll($DataViewPrototype,{setInt8:function setInt8(byteOffset,value){nativeSetInt8.call(this,byteOffset,value<<24>>24);},setUint8:function setUint8(byteOffset,value){nativeSetInt8.call(this,byteOffset,value<<24>>24);}},{unsafe:!0});}setToStringTag($ArrayBuffer,ARRAY_BUFFER),setToStringTag($DataView,DATA_VIEW),module.exports={ArrayBuffer:$ArrayBuffer,DataView:$DataView};})(_ref);var ArrayBufferModule = _ref.exports;export default ArrayBufferModule;